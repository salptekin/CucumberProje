package techproedturkish01.techproedturkish01api;

import static io.restassured.RestAssured.*;

import org.json.JSONObject;
import org.junit.Test;

import io.restassured.http.ContentType;
import io.restassured.response.Response;

public class PostRequest02 extends TestBase {
	
						  /*
							    				POST Scenario:
									Accept type Json olsun(Content Type demektir)
									When 
									POST request yolladigimda
									1) https://restful-booker.herokuapp.com/booking
									2) Request Body 
									{
									"firstname": "Suleyman",
									"lastname": "Alptekin",
									"totalprice": 123,
									"depositpaid": true,
									"bookingdates": {
									   "checkin": "2020-05-02",
									   "checkout": "2020-05-05"
									},
									"additionalneeds": "Wifi"
									}
									Then 
									Status Code 200 olmali
									Response Body'nin, Request Body ile ayni oldugunu verify ediniz.
							*/
	
	@Test
	public void post01() {
		
		JSONObject jsonBookingDatesBody = new JSONObject();
		jsonBookingDatesBody.put("checkin", "2020-05-02");
		jsonBookingDatesBody.put("checkout", "2020-05-05");
		
		JSONObject jsonRequestBody = new JSONObject();
		jsonRequestBody.put("firstname", "Suleyman");
		jsonRequestBody.put("lastname", "Alptekin");
		jsonRequestBody.put("totalprice", 123);
		jsonRequestBody.put("depositpaid", true);
		jsonRequestBody.put("bookingdates", jsonBookingDatesBody);//bookingdates'in value'su bir Json
		jsonRequestBody.put("additionalneeds", "Wifi");
		
		Response response = given().
				               contentType(ContentType.JSON).
				               spec(spec01).
				               auth().
				               basic("admin", "password123").
				               body(jsonRequestBody.toString()).
				            when().
				                post("/booking");
		response.prettyPrint();
		
		
		
		
		
		
		
		
		
		
	}
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	

}
